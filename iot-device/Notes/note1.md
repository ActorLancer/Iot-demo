# 物联网（IoT）开发

## 1. 通信协议
物联网设备通常需要一种轻量级的通信协议来与服务器进行通信。**MQTT（Message Queuing Telemetry Transport）**是一种常用的协议，适用于低宽带和高延迟的网络环境。它基于发布/订阅模型，允许设备高效地发送和接收消息。
- 轻量级：MQTT 协议头非常小，适合资源受限的设备。
- 发布/订阅模型：采用发布/订阅模型，设备（发布者）不需要知道谁是接收者，只需要将消息发布到特定主题（Topic）上。服务器（订阅者）可以订阅这些主题来接收数据。这使得系统架构更加灵活和可拓展。例如，多个客户端可以订阅同一个主题，从而实现数据的广播。
- 质量服务等级（QoS）：MQTT 提供三种不同的服务等级质量，以确保消息传递的可靠性：
  - QoS 0：最多一次传递，消息可能会丢失或重复。（"fire and forget"，QoS::AtMostOnce）
  - QoS 1：至少一次传递，确保消息至少被送达一次，但可能会重复。（"acknowledged delivery"，QoS::AtleastOnce）
  - QoS 2：只有一次传递，确保消息只被送达一次，适用于关键数据传输。（"exactly once delivery"，QoS::ExactlyOnce）
- 确保消息传递的可靠性：通过使用 QoS 1 或 QoS 2，可以确保关键数据不会丢失或重复。
- 确保连接的持久性：通过设置“消息遗嘱”（Last Will and Testament），可以在设备意外断开连接时通知其他客户端。
